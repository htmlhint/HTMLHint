var HTMLHint=function(o){var l={};function f(e,t){return new Array(e+1).join(t||" ")}return l.version="0.10.1",l.release="20180904",l.rules={},l.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},l.addRule=function(e){l.rules[e.id]=e},l.verify=function(e,n){n!==o&&0!==Object.keys(n).length||(n=l.defaultRuleset),e=e.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(e,t){return n===o&&(n={}),t.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(e,t,a){"false"===a?a=!1:"true"===a&&(a=!0),n[t]=a===o||a}),""});var t,a=new HTMLParser,i=new l.Reporter(e,n),r=l.rules;for(var s in n)(t=r[s])!==o&&!1!==n[s]&&t.init(a,i,n[s]);return a.parse(e),i.messages},l.format=function(e,t){var d=[],u={white:"",grey:"",red:"",reset:""};(t=t||{}).colors&&(u.white="[37m",u.grey="[90m",u.red="[31m",u.reset="[39m");var c=t.indent||0;return e.forEach(function(e){var t=e.evidence,a=e.line,n=e.col,i=t.length,r=41<n?n-40:1,s=t.length>n+60?n+60:i;n<41&&(s+=40-n+1),t=t.replace(/\t/g," ").substring(r-1,s),1<r&&(t="..."+t,r-=3),s<i&&(t+="..."),d.push(u.white+f(c)+"L"+a+" |"+u.grey+t+u.reset);var o=n-r,l=t.substring(0,o).match(/[^\u0000-\u00ff]/g);null!==l&&(o+=l.length),d.push(u.white+f(c)+f(String(a).length+3+o)+"^ "+u.red+e.message+" ("+e.rule.id+")"+u.reset)}),d},l}();"object"==typeof exports&&exports&&(exports.HTMLHint=HTMLHint),function(e,t){var a=function(){this._init.apply(this,arguments)};a.prototype={_init:function(e,t){var a=this;a.html=e,a.lines=e.split(/\r?\n/);var n=e.match(/\r?\n/);a.brLen=null!==n?n[0].length:0,a.ruleset=t,a.messages=[]},error:function(e,t,a,n,i){this.report("error",e,t,a,n,i)},warn:function(e,t,a,n,i){this.report("warning",e,t,a,n,i)},info:function(e,t,a,n,i){this.report("info",e,t,a,n,i)},report:function(e,t,a,n,i,r){for(var s,o,l=this.lines,d=this.brLen,u=a-1,c=l.length;u<c&&((o=(s=l[u]).length)<n&&a<c);u++)a++,1!==(n-=o)&&(n-=d);this.messages.push({type:e,message:t,raw:r,evidence:s,line:a,col:n,rule:{id:i.id,description:i.description,link:"https://github.com/thedaviddias/HTMLHint/wiki/"+i.id}})}},e.Reporter=a}(HTMLHint);var HTMLParser=function(N){var e=function(){this._init.apply(this,arguments)};return e.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},a=e.split(","),n=0;n<a.length;n++)t[a[n]]=!0;return t},parse:function(e){var t,a,n,i,r,s,o,l,d=this,u=d._mapCdataTags,c=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,f=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,g=/\r?\n/g,h=0,m=0,p=0,v=1,b=d._arrBlocks;function w(e,t,a,n){var i=a-p+1;for(n===N&&(n={}),n.raw=t,n.pos=a,n.line=v,n.col=i,b.push(n),d.fire(e,n);g.exec(t);)v++,p=a+g.lastIndex}for(d.fire("start",{pos:0,line:1,col:1});t=c.exec(e);)if(h<(a=t.index)&&(l=e.substring(h,a),r?o.push(l):w("text",l,h)),h=c.lastIndex,!(n=t[1])||(r&&n===r&&(w("cdata",l=o.join(""),m,{tagName:r,attrs:s}),o=s=r=null),r))if(r)o.push(t[0]);else if(n=t[4]){i=[];for(var L,y=t[5],T=0;L=f.exec(y);){var H=L[1],x=L[2]?L[2]:L[4]?L[4]:"",M=L[3]?L[3]:L[5]?L[5]:L[6]?L[6]:"";i.push({name:H,value:M,quote:x,index:L.index,raw:L[0]}),T+=L[0].length}T===y.length?(w("tagstart",t[0],a,{tagName:n,attrs:i,close:t[6]}),u[n]&&(r=n,s=i.concat(),o=[],m=h)):w("text",t[0],a)}else(t[2]||t[3])&&w("comment",t[0],a,{content:t[2]||t[3],long:!!t[2]});else w("tagend",t[0],a,{tagName:n});e.length>h&&w("text",l=e.substring(h,e.length),h),d.fire("end",{pos:h,line:v,col:e.length-p+1})},addListener:function(e,t){for(var a,n=this._listeners,i=e.split(/[,\s]/),r=0,s=i.length;r<s;r++)n[a=i[r]]===N&&(n[a]=[]),n[a].push(t)},fire:function(e,t){t===N&&(t={}),t.type=e;var a=this,n=[],i=a._listeners[e],r=a._listeners.all;i!==N&&(n=n.concat(i)),r!==N&&(n=n.concat(r));var s=a.lastEvent;null!==s&&(delete s.lastEvent,t.lastEvent=s),a.lastEvent=t;for(var o=0,l=n.length;o<l;o++)n[o].call(a,t)},removeListener:function(e,t){var a=this._listeners[e];if(a!==N)for(var n=0,i=a.length;n<i;n++)if(a[n]===t){a.splice(n,1);break}},fixPos:function(e,t){var a,n=e.raw.substr(0,t).split(/\r?\n/),i=n.length-1,r=e.line;return a=0<i?(r+=i,n[i].length+1):e.col+t,{line:r,col:a}},getMapAttrs:function(e){for(var t,a={},n=0,i=e.length;n<i;n++)a[(t=e[n]).name]=t.value;return a}},e}();"object"==typeof exports&&exports&&(exports.HTMLParser=HTMLParser),HTMLHint.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(r,s){var o=this;r.addListener("tagstart",function(e){var t,a=e.tagName.toLowerCase(),n=r.getMapAttrs(e.attrs),i=e.col+a.length+1;"img"!==a||"alt"in n?("area"===a&&"href"in n||"input"===a&&"image"===n.type)&&("alt"in n&&""!==n.alt||(t="area"===a?"area[href]":"input[type=image]",s.warn("The alt attribute of "+t+" must have a value.",e.line,i,o,e.raw))):s.warn("An alt attribute must be present on <img> elements.",e.line,i,o,e.raw)})}}),HTMLHint.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,o,t){var l=this,d=Array.isArray(t)?t:[];e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++){var s=(t=a[i]).name;-1===d.indexOf(s)&&s!==s.toLowerCase()&&o.error("The attribute name of [ "+s+" ] must be in lowercase.",e.line,n+t.index,l,t.raw)}})}}),HTMLHint.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,l){var d=this;e.addListener("tagstart",function(e){for(var t,a,n=e.attrs,i=e.col+e.tagName.length+1,r={},s=0,o=n.length;s<o;s++)!0===r[a=(t=n[s]).name]&&l.error("Duplicate of attribute name [ "+t.name+" ] was found.",e.line,i+t.index,d,t.raw),r[a]=!0})}}),HTMLHint.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,d){var u=this;e.addListener("tagstart",function(e){for(var t,a,n=e.attrs,i=e.col+e.tagName.length+1,r=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,s=0,o=n.length;s<o;s++)if(null!==(a=(t=n[s]).value.match(r))){var l=escape(a[0]).replace(/%u/,"\\u").replace(/%/,"\\x");d.warn("The value of attribute [ "+t.name+" ] cannot contain an unsafe char [ "+l+" ].",e.line,i+t.index,u,t.raw)}})}}),HTMLHint.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,s){var o=this;e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++)(""!==(t=a[i]).value&&'"'!==t.quote||""===t.value&&"'"===t.quote)&&s.error("The value of attribute [ "+t.name+" ] must be in double quotes.",e.line,n+t.index,o,t.raw)})}}),HTMLHint.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,s){var o=this;e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++)""===(t=a[i]).quote&&""===t.value&&s.warn("The attribute [ "+t.name+" ] must have a value.",e.line,n+t.index,o,t.raw)})}}),HTMLHint.addRule({id:"csslint",description:"Scan css with csslint.",init:function(e,i,r){var s=this;e.addListener("cdata",function(e){var t;if("style"===e.tagName.toLowerCase()&&(t="object"==typeof exports&&require?require("csslint").CSSLint.verify:CSSLint.verify,void 0!==r)){var a=e.line-1,n=e.col-1;try{t(e.raw,r).messages.forEach(function(e){var t=e.line;i["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,a+t,(1===t?n:0)+e.col,s,e.evidence)})}catch(e){}}})}}),HTMLHint.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(t,a){var n=this,i=function(e){"start"===e.type||"text"===e.type&&/^\s*$/.test(e.raw)||(("comment"!==e.type&&!1===e.long||!1===/^DOCTYPE\s+/i.test(e.content))&&a.error("Doctype must be declared first.",e.line,e.col,n,e.raw),t.removeListener("all",i))};t.addListener("all",i)}}),HTMLHint.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(t,a){var n=this;function i(e){!1===e.long&&"doctype html"!==e.content.toLowerCase()&&a.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,n,e.raw)}t.addListener("all",i),t.addListener("tagstart",function e(){t.removeListener("comment",i),t.removeListener("tagstart",e)})}}),HTMLHint.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(n,i){var r=this,s=/^(text\/javascript|application\/javascript)$/i,o=!1;function a(e){var t=n.getMapAttrs(e.attrs).type,a=e.tagName.toLowerCase();"head"===a&&(o=!0),!0!==o||"script"!==a||t&&!0!==s.test(t)||i.warn("The <script> tag cannot be used in a <head> tag.",e.line,e.col,r,e.raw)}n.addListener("tagstart",a),n.addListener("tagend",function e(t){"head"===t.tagName.toLowerCase()&&(n.removeListener("tagstart",a),n.removeListener("tagend",e))})}}),HTMLHint.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,s,t){var o=this,l="abs"===t?"absolute":"relative";e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++)if("href"===(t=a[i]).name){("absolute"===l&&!1===/^\w+?:/.test(t.value)||"relative"===l&&!0===/^https?:\/\//.test(t.value))&&s.warn("The value of the href attribute [ "+t.value+" ] must be "+l+".",e.line,n+t.index,o,t.raw);break}})}}),HTMLHint.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,o){var l=this;e.addListener("tagstart",function(e){for(var t,a,n=e.attrs,i=e.col+e.tagName.length+1,r=0,s=n.length;r<s;r++)a=(t=n[r]).name,/^(id|class)$/i.test(a)&&/(^|[-_])ad([-_]|$)/i.test(t.value)&&o.warn("The value of attribute "+a+" cannot use the ad keyword.",e.line,i+t.index,l,t.raw)})}}),HTMLHint.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,u,t){var a,c=this;if((a="string"==typeof t?{underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}}[t]:t)&&a.regId){var f=a.regId,g=a.message;e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++)if("id"===(t=a[i]).name.toLowerCase()&&!1===f.test(t.value)&&u.warn(g,e.line,n+t.index,c,t.raw),"class"===t.name.toLowerCase())for(var s,o=t.value.split(/\s+/g),l=0,d=o.length;l<d;l++)(s=o[l])&&!1===f.test(s)&&u.warn(g,e.line,n+t.index,c,s)})}}}),HTMLHint.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,o){var l=this,d={};e.addListener("tagstart",function(e){for(var t,a,n=e.attrs,i=e.col+e.tagName.length+1,r=0,s=n.length;r<s;r++)if("id"===(t=n[r]).name.toLowerCase()){(a=t.value)&&(void 0===d[a]?d[a]=1:d[a]++,1<d[a]&&o.error("The id value [ "+a+" ] must be unique.",e.line,i+t.index,l,t.raw));break}})}}),HTMLHint.addRule({id:"inline-script-disabled",description:"Inline script cannot be used.",init:function(e,l){var d=this;e.addListener("tagstart",function(e){for(var t,a,n=e.attrs,i=e.col+e.tagName.length+1,r=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,s=0,o=n.length;s<o;s++)a=(t=n[s]).name.toLowerCase(),!0===r.test(a)?l.warn("Inline script [ "+t.raw+" ] cannot be used.",e.line,i+t.index,d,t.raw):"src"!==a&&"href"!==a||/^\s*javascript:/i.test(t.value)&&l.warn("Inline script [ "+t.raw+" ] cannot be used.",e.line,i+t.index,d,t.raw)})}}),HTMLHint.addRule({id:"inline-style-disabled",description:"Inline style cannot be used.",init:function(e,s){var o=this;e.addListener("tagstart",function(e){for(var t,a=e.attrs,n=e.col+e.tagName.length+1,i=0,r=a.length;i<r;i++)"style"===(t=a[i]).name.toLowerCase()&&s.warn("Inline style [ "+t.raw+" ] cannot be used.",e.line,n+t.index,o,t.raw)})}}),HTMLHint.addRule({id:"jshint",description:"Scan script with jshint.",init:function(o,l,d){var u=this;o.addListener("cdata",function(e){if("script"===e.tagName.toLowerCase()){var t,a=o.getMapAttrs(e.attrs),n=a.type;if(void 0!==a.src||n&&!1===/^(text\/javascript)$/i.test(n))return;if(t="object"==typeof exports&&require?require("jshint").JSHINT:JSHINT,void 0!==d){var i=e.line-1,r=e.col-1,s=e.raw.replace(/\t/g," ");try{!1===t(s,d,d.globals)&&t.errors.forEach(function(e){var t=e.line;l.warn(e.reason,i+t,(1===t?r:0)+e.character,u,e.evidence)})}catch(e){}}}})}}),HTMLHint.addRule({id:"script-disabled",description:"The &lt;script&gt; tag cannot be used.",init:function(e,t){"use strict";var a=this;e.addListener("tagstart",function(e){"script"===e.tagName.toLowerCase()&&t.error("The <script> tag cannot be used.",e.line,e.col,a,e.raw)})}}),HTMLHint.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(s,o,e){var l=this,d="nomix",u=null;if("string"==typeof e){var t=e.match(/^([a-z]+)(\d+)?/);d=t[1],u=t[2]&&parseInt(t[2],10)}s.addListener("text",function(e){for(var t,a=e.raw,n=/(^|\r?\n)([ \t]+)/g;t=n.exec(a);){var i=s.fixPos(e,t.index+t[1].length);if(1===i.col){var r=t[2];"space"===d?u?!1!==/^ +$/.test(r)&&r.length%u==0||o.warn("Please use space for indentation and keep "+u+" length.",i.line,1,l,e.raw):!1===/^ +$/.test(r)&&o.warn("Please use space for indentation.",i.line,1,l,e.raw):"tab"===d&&!1===/^\t+$/.test(r)?o.warn("Please use tab for indentation.",i.line,1,l,e.raw):!0===/ +\t|\t+ /.test(r)&&o.warn("Do not mix tabs and spaces for indentation.",i.line,1,l,e.raw)}}})}}),HTMLHint.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(r,s){var o=this;r.addListener("text",function(e){for(var t,a=e.raw,n=/[<>]/g;t=n.exec(a);){var i=r.fixPos(e,t.index);s.error("Special characters must be escaped : [ "+t[0]+" ].",i.line,i.col,o,e.raw)}})}}),HTMLHint.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,o){var l=this;e.addListener("tagstart",function(e){for(var t,a=e.tagName,n=e.attrs,i=e.col+a.length+1,r=0,s=n.length;r<s;r++)t=n[r],(!0===/^(img|script|embed|bgsound|iframe)$/.test(a)&&"src"===t.name||"link"===a&&"href"===t.name||"object"===a&&"data"===t.name)&&""===t.value&&o.error("The attribute [ "+t.name+" ] of the tag [ "+a+" ] must have a value.",e.line,i+t.index,l,t.raw)})}}),HTMLHint.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var a=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,a,e.raw)})}}),HTMLHint.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,s){var o=this,l=[],a=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==a[t]||e.close||l.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var t=e.tagName.toLowerCase(),a=l.length-1;0<=a&&l[a].tagName!==t;a--);if(0<=a){for(var n=[],i=l.length-1;a<i;i--)n.push("</"+l[i].tagName+">");if(0<n.length){var r=l[l.length-1];s.error("Tag must be paired, missing: [ "+n.join("")+" ], start tag match failed [ "+r.raw+" ] on line "+r.line+".",e.line,e.col,o,e.raw)}l.length=a}else s.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,o,e.raw)}),e.addListener("end",function(e){for(var t=[],a=l.length-1;0<=a;a--)t.push("</"+l[a].tagName+">");if(0<t.length){var n=l[l.length-1];s.error("Tag must be paired, missing: [ "+t.join("")+" ], open tag match failed [ "+n.raw+" ] on line "+n.line+".",e.line,e.col,o,"")}})}}),HTMLHint.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,a){var n=this,i=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==i[t]&&(e.close||a.warn("The empty tag : [ "+t+" ] must be self closed.",e.line,e.col,n,e.raw))})}}),HTMLHint.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,a,t){var n=this,i=Array.isArray(t)?t:[];e.addListener("tagstart,tagend",function(e){var t=e.tagName;-1===i.indexOf(t)&&t!==t.toLowerCase()&&a.error("The html element name of [ "+t+" ] must be in lowercase.",e.line,e.col,n,e.raw)})}}),HTMLHint.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(i,r){var s=this,a=!1,o=!1;function l(e){var t=e.tagName.toLowerCase();"head"===t?a=!0:"title"===t&&a&&(o=!0)}i.addListener("tagstart",l),i.addListener("tagend",function e(t){var a=t.tagName.toLowerCase();if(o&&"title"===a){var n=t.lastEvent;("text"!==n.type||"text"===n.type&&!0===/^\s*$/.test(n.raw))&&r.error("<title></title> must not be empty.",t.line,t.col,s,t.raw)}else"head"===a&&(!1===o&&r.error("<title> must be present in <head> tag.",t.line,t.col,s,t.raw),i.removeListener("tagstart",l),i.removeListener("tagend",e))})}});